import fs from 'fs';
import util from 'util';

const writeFile = util.promisify(fs.writeFile);

/**
 * Writes the `gears.dart` file, which contains proxy exports
 * for all the gears generated by the `writeAsDartGearDefinitionInstance`
 * function.
 *
 * @param exports The list of export statements to write
 */
export const writeDartProxyExportFile = async (
  exports: string[],
  filePath: string,
): Promise<void> => {
  const contents: string[] = [];

  contents.push(`// THIS FILE IS AUTO-GENERATED
// ---------------------------
//
// Do not edit by hand.
//
// This file is generated by the Node application
// in the \`gear_generator\` directory.`);

  contents.push('');

  for (const ex of exports) {
    contents.push(ex);
  }

  contents.push('');

  await writeFile(filePath, contents.join('\n'));
};
